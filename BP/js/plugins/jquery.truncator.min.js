(function(a){function c(a,b){return a.nodeType==3?e(a,b):d(a,b)}function d(b,d){var b=a(b);var e=b.clone().empty();var f;b.contents().each(function(){var a=d-e.text().length;if(a==0)return;f=c(this,a);if(f)e.append(f)});return e}function e(c,d){var e=f(c.data);if(b)e=e.replace(/^ /,"");b=!!e.match(/ $/);var e=e.slice(0,d);e=a("<div/>").text(e).html();return e}function f(a){return a.replace(/\s+/g," ")}function g(b){var c=a(b);var d=c.children(":last");if(!d)return b;var e=d.css("display");if(!e||e=="inline")return c;return g(d)}function h(b){var c=a(b);var d=c.children(":last");if(d&&d.is("p"))return d;return b}var b=true;a.fn.truncate=function(b){var d=a.extend({},a.fn.truncate.defaults,b);a(this).each(function(){var b=a.trim(f(a(this).text())).length;if(b<=d.max_length)return;var e=d.max_length-d.more.length-3;var i=c(this,e);var j=a(this).hide();i.insertAfter(j);g(i).append(' (<a href="#show more content">'+d.more+"</a>)");h(j).append(' (<a href="#show less content">'+d.less+"</a>)");i.find("a:last").click(function(){i.hide();j.show();return false});j.find("a:last").click(function(){i.show();j.hide();return false})})};a.fn.truncate.defaults={max_length:100,more:"â€¦m&aacute;s",less:"menos"};})(jQuery)